1
00:00:12,082 --> 00:00:15,101
good morning everyone and welcome the
session 5

2
00:00:16,001 --> 00:00:16,060
01

3
00:00:16,006 --> 00:00:20,014
what's new with core audio I'm the first
MC on the mic today my name story

4
00:00:20,068 --> 00:00:24,085
and a we have been very busy we have a
lot of interesting things to share with

5
00:00:24,085 --> 00:00:24,156
you today

6
00:00:25,056 --> 00:00:28,140
we're going to start off by talking with
about some enhancements that we've made

7
00:00:29,004 --> 00:00:29,085
the core MIDI

8
00:00:30,021 --> 00:00:34,870
and how that affects you and your app's
and we'll move on to entrap audio views

9
00:00:35,059 --> 00:00:39,280
and then we will have a large section on
the new improved and enhanced

10
00:00:39,028 --> 00:00:42,067
a V Foundation audio and that will
include

11
00:00:42,067 --> 00:00:45,346
talk about our unit manager AV audio
session

12
00:00:45,949 --> 00:00:50,680
some utility classes and at last bullet
point there AB audio engine is such

13
00:00:50,068 --> 00:00:54,121
a large topic that it gets the session
all to itself directly following this

14
00:00:55,021 --> 00:00:57,090
one in the same room starting at 10:15
a.m.

15
00:00:57,009 --> 00:01:02,628
so without further ado let's talk about
what's new with core MIDI

16
00:01:03,519 --> 00:01:06,615
if you have a studio a music studio

17
00:01:07,479 --> 00:01:10,620
that you use to make music it may look
something

18
00:01:10,062 --> 00:01:14,131
like this so maybe there's a Mac in the
centre ovett or nihilist device also

19
00:01:15,031 --> 00:01:16,033
very capable

20
00:01:16,033 --> 00:01:20,038
be the center of her studio and
connected to it may be several USB MIDI

21
00:01:20,038 --> 00:01:20,114
devices

22
00:01:21,014 --> 00:01:26,025
controllers breakout boxes that are
connected by a5 pendant a legacy

23
00:01:26,025 --> 00:01:29,056
quit met miss questions musical
instruments

24
00:01:29,056 --> 00:01:33,074
and also you may have a network session
going well beginning and I O S

25
00:01:33,074 --> 00:01:36,103
8 and Mac OS 10 yosemite your studio

26
00:01:37,003 --> 00:01:41,012
can start to look like this so imagine
after making a very quick

27
00:01:41,039 --> 00:01:44,530
Bluetooth connection sitting down on a
couch on the other side of the room in

28
00:01:44,053 --> 00:01:44,752
your studio

29
00:01:45,229 --> 00:01:48,278
and controlling all your music that's
what you'll be able to do

30
00:01:48,719 --> 00:01:51,776
with MIDI over Bluetooth so starting I
was a

31
00:01:52,289 --> 00:01:55,700
and an Mac OS 10 yosemite you'll be able
to send

32
00:01:55,007 --> 00:01:59,026
and receive MIDI data over Bluetooth Low
Energy connections

33
00:01:59,719 --> 00:02:03,795
on any device or Mac to his native
Bluetooth Low Energy support

34
00:02:04,479 --> 00:02:08,550
the connection to establish a secure
meaning the pairings and forced

35
00:02:08,055 --> 00:02:11,063
no one can connect your device is
without your explicit consent

36
00:02:11,063 --> 00:02:14,072
and after the connection is established

37
00:02:14,072 --> 00:02:17,149
it just appears as an ordinary MIDI
device any application that knows how to

38
00:02:18,049 --> 00:02:19,091
communicate with the MIDI device

39
00:02:19,091 --> 00:02:23,118
can talk to so to talk a little bit more
about how this connection works over

40
00:02:24,018 --> 00:02:26,076
Bluetooth I want to talk about the two
key roles

41
00:02:26,076 --> 00:02:29,089
involved in a Bluetooth connection
there's the central

42
00:02:29,089 --> 00:02:32,148
and the peripheral you already have some
familiarity with this

43
00:02:33,048 --> 00:02:36,142
maybe not with these names you can be
your central is like your

44
00:02:37,042 --> 00:02:41,060
iPhone and your Prof role is like your
Bluetooth earpiece the peripherals job

45
00:02:41,006 --> 00:02:41,073
is to

46
00:02:42,027 --> 00:02:46,038
become discoverable and say hey I can be
something you can connect to me

47
00:02:46,038 --> 00:02:49,107
so for Bluetooth many peripheral side

48
00:02:50,007 --> 00:02:53,050
will advertise the many capabilities

49
00:02:53,005 --> 00:02:56,012
will say hey I can do maybe you can
connect to me now and then that side

50
00:02:56,057 --> 00:02:56,118
weights

51
00:02:57,018 --> 00:03:00,053
the central can scan for device

52
00:03:00,053 --> 00:03:03,080
that says they can do many and then
establish a connection

53
00:03:03,008 --> 00:03:06,063
after that Bluetooth connection has been
established

54
00:03:07,035 --> 00:03:11,078
MIDI data can be shuttled by
directionally between both cities

55
00:03:11,078 --> 00:03:14,124
now in order to have a Bluetooth
connection you have to have one central

56
00:03:15,024 --> 00:03:16,086
you have to have one peripheral

57
00:03:16,086 --> 00:03:20,088
and we allow max anti-western my sister
play i the role

58
00:03:20,088 --> 00:03:23,103
so you can connect Mac to Mac I West I O
S

59
00:03:24,003 --> 00:03:27,082
Mac Diallo s and vice versa so

60
00:03:27,082 --> 00:03:30,180
what does this mean for you and your
application if you are writing a Mac OS

61
00:03:31,008 --> 00:03:32,077
and application the good news is

62
00:03:33,049 --> 00:03:36,056
you are already read a already ready

63
00:03:37,019 --> 00:03:40,090
this is the MIDI studio panel from audio
MIDI setup with some

64
00:03:40,009 --> 00:03:44,023
sure you're all familiar with if you
look there you'll see a new icon

65
00:03:45,004 --> 00:03:48,101
the Bluetooth configuration icon you
double click that icon

66
00:03:49,001 --> 00:03:52,032
you're going to get a new window and
this window

67
00:03:52,032 --> 00:03:55,125
will allow you to play either the
central Upper for all

68
00:03:56,025 --> 00:03:59,050
if you look at kind of the top third out
the window you'll see where

69
00:03:59,005 --> 00:04:02,010
there's a button this is advertising
click advertise to become discoverable

70
00:04:02,055 --> 00:04:02,129
as

71
00:04:03,029 --> 00:04:06,098
fresh air that's a name that you can
modify fresh Air's the name my

72
00:04:06,098 --> 00:04:09,126
Mac Book Air because it's fresh then

73
00:04:10,026 --> 00:04:14,030
the bottom two-thirds ovett is the
central view if someone is advertising

74
00:04:14,066 --> 00:04:14,159
hey i can't. MIDI

75
00:04:15,059 --> 00:04:18,608
it will show up in the bottom you click
Connect to establish the connection

76
00:04:19,139 --> 00:04:22,740
the parent will happen and then a new
MIDI device will appear in the setup

77
00:04:22,074 --> 00:04:26,122
the any application that uses many
devices can see and communicate with

78
00:04:27,022 --> 00:04:31,055
now on I'll West there is no audio MIDI
setup so how do you manage your budget

79
00:04:31,055 --> 00:04:32,076
many connections

80
00:04:32,076 --> 00:04:35,170
you be using Newco radio kit view
controllers

81
00:04:36,007 --> 00:04:39,039
there are two new Corradi ok if you
control it that you can adhere

82
00:04:40,002 --> 00:04:41,002
application

83
00:04:41,002 --> 00:04:44,049
one of them that allows you to play the
role the central which means use can

84
00:04:44,049 --> 00:04:44,142
connect

85
00:04:45,042 --> 00:04:47,136
and another that allows you to play the
role of peripheral which means you

86
00:04:48,036 --> 00:04:50,088
advertise and wait

87
00:04:50,088 --> 00:04:53,110
if you establish a connection between
two devices over budget meeting

88
00:04:54,001 --> 00:04:57,038
and they're not communicating for a
while on their unused by the application

89
00:04:57,047 --> 00:05:00,079
after several minutes we will terminate
a Bluetooth connection to say

90
00:05:00,079 --> 00:05:04,124
our so what is all this look like and
practice

91
00:05:05,024 --> 00:05:08,121
I'm gonna show you a short UI demo how
users

92
00:05:09,021 --> 00:05:12,034
would use this and their studios

93
00:05:12,034 --> 00:05:15,036
okay I've got my demo machine ready here

94
00:05:15,036 --> 00:05:18,105
and what I'm going to do is I'm going to

95
00:05:19,005 --> 00:05:24,048
launch Audio MIDI setup

96
00:05:24,048 --> 00:05:30,091
this is the audio window will close this
and we'll go to the many wonder

97
00:05:30,091 --> 00:05:33,100
up you notice your name anyone know
there's this new Bluetooth configuration

98
00:05:34,000 --> 00:05:37,032
panel so if I double clicked this then I
will see

99
00:05:37,032 --> 00:05:42,101
that they're currently no advertising
that is many devices

100
00:05:42,389 --> 00:05:46,170
I want my Mac to play the role a central
so I'm going to wait for someone to

101
00:05:46,017 --> 00:05:48,032
become available to connect to

102
00:05:48,032 --> 00:05:54,035
and I'm going to use my iPad for that

103
00:05:54,035 --> 00:05:58,127
so here's my iPad and this is a little
test application that we wrote to

104
00:05:59,027 --> 00:06:00,035
implement the

105
00:06:00,035 --> 00:06:03,069
did Corradi ok if you controllers that
talked about earlier

106
00:06:03,069 --> 00:06:06,165
I'm going to get advertisement set up in
this will give me the peripheral view

107
00:06:07,065 --> 00:06:12,081
you look at the top has to the name this
iPad areas i pair MIDI

108
00:06:12,081 --> 00:06:16,085
I want to change its name like it at the
eye but I'm okay with that name

109
00:06:17,021 --> 00:06:20,075
and then I will say advertise in any
service

110
00:06:20,075 --> 00:06:23,082
now after I am advertising the MIDI
service

111
00:06:23,082 --> 00:06:27,091
back on a Mac OS 10 missing you'll see i
pair media showed up here

112
00:06:28,072 --> 00:06:32,136
by click Connect after a few moments
you'll see a new device appear in the

113
00:06:33,036 --> 00:06:36,128
MIDI setup

114
00:06:37,028 --> 00:06:40,637
and when to launch main stage because
mainstage Cana

115
00:06:40,889 --> 00:06:46,630
receive MIDI notes and playback audio

116
00:06:46,063 --> 00:06:50,105
go into performance mood

117
00:06:51,005 --> 00:06:54,031
okay so be confessing her I don't like
he's

118
00:06:54,031 --> 00:06:57,049
but I do have an application the place
he's really well

119
00:06:57,049 --> 00:07:02,054
called arpeggio non-pro so I'm going to
launch that

120
00:07:02,054 --> 00:07:08,059
and I'm going to use it to send MIDI
data

121
00:07:08,059 --> 00:07:12,121
over to the main stage 3

122
00:07:13,021 --> 00:07:16,040
okay now one thing I want to do really
quickly here

123
00:07:16,004 --> 00:07:19,050
is check my connection status that debt
left it

124
00:07:19,086 --> 00:07:22,111
inactive for quite a while here so I'm
going to

125
00:07:23,011 --> 00:07:30,011
go back and make myself advertise on
more time

126
00:07:32,002 --> 00:07:36,080
so now

127
00:07:36,008 --> 00:07:40,103
this is live many data being sent over
Bluetooth

128
00:07:41,075 --> 00:07:46,174
I can get there by a little louder
please thank you

129
00:07:47,074 --> 00:07:52,074
so from want to do this preset Scott
epic fall

130
00:07:52,074 --> 00:07:56,074
and it is epic you

131
00:07:56,074 --> 00:07:59,171
so that's Bluetooth being sent over MIDI

132
00:08:00,071 --> 00:08:03,098
and also descends not only the
controller data

133
00:08:03,098 --> 00:08:06,194
but it also sends the sec stated that
you may have

134
00:08:07,094 --> 00:08:10,122
or any other type of MIDI a few final
words

135
00:08:11,022 --> 00:08:16,086
before I turn the mike over this
Bluetooth that

136
00:08:16,086 --> 00:08:19,148
being able to connect bluetooth many
connections will work on both West in

137
00:08:20,048 --> 00:08:20,111
Yosemite

138
00:08:21,011 --> 00:08:24,820
NIOS 8 using those view controllers that
I told about

139
00:08:24,919 --> 00:08:28,720
net told you about and will work on any
Mac iPhone or iPad that has native

140
00:08:28,072 --> 00:08:29,126
Bluetooth Low Energy support

141
00:08:30,026 --> 00:08:33,055
so now I'm gonna tell you which ones
those are from Max

142
00:08:33,289 --> 00:08:36,294
any Mac that was manufactured in 2012 or
later

143
00:08:36,789 --> 00:08:40,440
and a mixed bag max that were released
in 2011 also have native Bluetooth Low

144
00:08:40,044 --> 00:08:40,128
Energy support

145
00:08:41,028 --> 00:08:45,046
for the iPhone the iPhone 4s and greater
have Bluetooth Ellie

146
00:08:45,046 --> 00:08:49,108
for the iPad the first iPad with Retina
display has Leen the ones from that

147
00:08:50,008 --> 00:08:51,031
point and all

148
00:08:51,031 --> 00:08:55,060
iPad Mini 780 Bluetooth Low Energy
support so this will work on all other

149
00:08:55,339 --> 00:08:56,140
systems

150
00:08:56,014 --> 00:09:00,071
also the connection is really low that
low latency it's very sensitive

151
00:09:00,071 --> 00:09:05,085
and the Bluetooth belly band with
greatly exceeds the minimum maybe ban

152
00:09:05,085 --> 00:09:07,094
with requirement for media for 1000 12
25

153
00:09:08,075 --> 00:09:11,162
bytes per second standardization is in
the works were working with standards

154
00:09:12,062 --> 00:09:12,116
bodies

155
00:09:13,016 --> 00:09:17,068
to standardizes so more people can get
in on it and the key takeaway for you is

156
00:09:17,068 --> 00:09:18,115
if you're making I O S

157
00:09:19,015 --> 00:09:23,024
applications please start adding the
sleep these Bluetooth you I

158
00:09:23,024 --> 00:09:26,027
you controllers immediately to your
applications

159
00:09:26,027 --> 00:09:30,111
so that users can manage can manage
Richard many connections using your app

160
00:09:31,011 --> 00:09:35,066
and a person is going to show you how to
do that is my colleague and homeboy Mike

161
00:09:35,066 --> 00:09:35,138
Hopkins

162
00:09:36,038 --> 00:09:39,066
and I'll turn the mike over to him thank
you very much story

163
00:09:39,066 --> 00:09:42,068
I'd like to talk to you this morning
about

164
00:09:42,086 --> 00:09:46,088
a new framework for I a less called core
i do. cat

165
00:09:46,088 --> 00:09:50,107
this framework provides standardized
user interface

166
00:09:51,007 --> 00:09:55,085
elements for you to add to your
application to do things like

167
00:09:55,085 --> 00:09:58,098
show the many over Bluetooth Ellie

168
00:09:58,098 --> 00:10:02,707
you I that Tori just demonstrated as
well as some new reviews for does the

169
00:10:03,589 --> 00:10:04,850
view that are doing and trap

170
00:10:04,085 --> 00:10:07,107
audio we've designed a so the

171
00:10:08,007 --> 00:10:11,073
we do all the heavy lifting so that you
don't have to worry about rolling your

172
00:10:11,073 --> 00:10:11,081
own UI

173
00:10:12,053 --> 00:10:15,232
and you can just concentrate on what
makes your app unique

174
00:10:15,709 --> 00:10:19,680
therefore they're very easy to adopt
with a minimal amount of source code

175
00:10:19,068 --> 00:10:22,154
and they work on both iPhone and iPad

176
00:10:23,054 --> 00:10:27,058
looking specifically about these

177
00:10:27,094 --> 00:10:30,129
inner interface elements for media over
Bluetooth Ellie

178
00:10:31,029 --> 00:10:35,094
as story showed you we have

179
00:10:35,094 --> 00:10:38,188
why we have separated these into two
different view controller so that you

180
00:10:39,088 --> 00:10:40,119
can choose which one is

181
00:10:41,019 --> 00:10:44,070
appropriate for your own application or
you can use ball

182
00:10:44,007 --> 00:10:47,018
for example of using you I split view
controller

183
00:10:47,081 --> 00:10:52,135
you can have those both visible at the
same time the first one is the Capt many

184
00:10:53,035 --> 00:10:54,124
local perform you controller

185
00:10:55,024 --> 00:10:58,030
that's quite a mouthful this early in
the morning I am

186
00:10:58,003 --> 00:11:01,041
if you want to advertise your OS device

187
00:11:01,068 --> 00:11:08,068
as a per for all he is this class the
source code for adopting this is a very

188
00:11:08,075 --> 00:11:08,168
straightforward

189
00:11:09,068 --> 00:11:12,070
you create a new instance in that view
controller

190
00:11:12,007 --> 00:11:17,038
get the navigation controller object for
your app

191
00:11:18,001 --> 00:11:23,063
and push that view controller onto the
stack the

192
00:11:23,063 --> 00:11:28,097
the Capt many central new controller is
required if you want to discover and

193
00:11:28,097 --> 00:11:28,170
connect

194
00:11:29,007 --> 00:11:33,016
to Bluetooth peripherals and you use
that in the same way

195
00:11:34,006 --> 00:11:38,060
you chretien view controller and push in
on to your view controller stack

196
00:11:39,014 --> 00:11:42,043
now I'd like to switch over and talk
about

197
00:11:42,043 --> 00:11:48,045
enter up audio for those heavy they
weren't present last year WWDC we had a

198
00:11:48,063 --> 00:11:52,102
session talking about this new
technology that we released with Iowa 7

199
00:11:53,002 --> 00:11:58,037
in Review intra-party allows you to
stream audio between

200
00:11:58,037 --> 00:12:02,073
one or more APs in real time a host
application

201
00:12:02,073 --> 00:12:07,097
can discover available no naps even if
they're not running

202
00:12:07,097 --> 00:12:10,153
and please refer to last year's session

203
00:12:11,053 --> 00:12:15,972
what's new in core idea session to a sex
for further details

204
00:12:16,449 --> 00:12:20,462
but looking at how this works with the
host appena connected no tap

205
00:12:20,579 --> 00:12:24,510
know that can be an instrument in effect
or a generator

206
00:12:24,051 --> 00:12:28,112
and her staff and no doubt can send
audio back and forth

207
00:12:29,012 --> 00:12:33,341
in the case and an instrument the host
at can also send me to that

208
00:12:33,449 --> 00:12:39,740
instrument ap and receive idea back

209
00:12:39,074 --> 00:12:42,137
the two user interface elements that
we've that we provide

210
00:12:43,037 --> 00:12:48,065
and I O S 8 are firstly the entrapped
idea switcher view

211
00:12:48,065 --> 00:12:52,484
which provides an easy way to see all
the and trap i do. absent are connected

212
00:12:53,069 --> 00:12:54,220
together

213
00:12:54,022 --> 00:12:59,041
and switch between them using a simple
tap gesture

214
00:12:59,041 --> 00:13:02,050
we also provide a and trap audio

215
00:13:02,005 --> 00:13:06,824
host transport view this displays the
transport in the host you're connected

216
00:13:07,319 --> 00:13:08,850
to and you're no doubt

217
00:13:08,085 --> 00:13:11,814
and allows you to control the transport
playback

218
00:13:12,579 --> 00:13:16,740
rewind and record in addition to
displaying where

219
00:13:16,074 --> 00:13:22,098
and their transport you are by that
numeric timecode

220
00:13:22,098 --> 00:13:25,115
night like to show a demo this in action

221
00:13:26,015 --> 00:13:29,097
I have three different applications here
that will be using together in a wrap

222
00:13:29,097 --> 00:13:30,716
ideas scenario

223
00:13:31,589 --> 00:13:35,170
the first of which is garage band which
is the current version of that

224
00:13:35,017 --> 00:13:38,110
application that I've downloaded from
the iTunes Store

225
00:13:39,001 --> 00:13:42,001
and I also have a delay application

226
00:13:42,001 --> 00:13:47,220
and an a sampler let's take a look at
the sampler first

227
00:13:47,319 --> 00:13:54,319
this allows me to trigger sample
playback play the keyboard

228
00:13:57,023 --> 00:13:59,572
for now let's go ahead and connect this
to garage band

229
00:13:59,779 --> 00:14:06,779
middle and grunge band gonna connect to
that

230
00:14:09,259 --> 00:14:14,040
sampler ap in and now this is connected
to garage band

231
00:14:14,004 --> 00:14:17,092
so the first thing I'd like to
demonstrate is that entrap idea switcher

232
00:14:17,092 --> 00:14:17,147
view

233
00:14:18,047 --> 00:14:21,105
an action which this application is
implemented

234
00:14:22,005 --> 00:14:27,104
as invisible by a button i press to and
you can see now

235
00:14:27,149 --> 00:14:32,130
that we have two nodes show on the
hearst as well as our current

236
00:14:32,013 --> 00:14:35,018
application and I can switch over to
grudge band

237
00:14:35,018 --> 00:14:39,113
simply by tapping I'm going to add an
additional

238
00:14:40,013 --> 00:14:44,472
enter up i do. ap the delay effect

239
00:14:44,589 --> 00:14:51,160
and now if I was to switch over to this
application

240
00:14:51,016 --> 00:14:55,055
without using the switcher view aka
double tap on my home key

241
00:14:55,199 --> 00:15:00,740
the look can try to find an application
whereas it it's it's difficult to find

242
00:15:00,074 --> 00:15:04,093
I mean that's why we've provided the
entrapped switcher view

243
00:15:04,093 --> 00:15:08,124
and this application the delay you can
see that in the lower right hand corner

244
00:15:09,024 --> 00:15:12,027
and now that is showing our host

245
00:15:12,054 --> 00:15:15,163
this sampler as well as our current a
fact

246
00:15:15,649 --> 00:15:20,668
so it's very easy to switch back and
forth

247
00:15:20,839 --> 00:15:23,908
and you can see that just showed up
there so that's the first you'd like to

248
00:15:24,529 --> 00:15:24,604
demonstrate

249
00:15:25,279 --> 00:15:31,540
and if I play back on my keyboard we can
hear that we're now getting that delay

250
00:15:31,054 --> 00:15:34,072
and this is interesting because we have
I'm

251
00:15:34,072 --> 00:15:38,073
or sending audio from the host tour
sampler and then

252
00:15:38,073 --> 00:15:42,106
through an app attacked the plane that
delay and then back now the second you

253
00:15:43,006 --> 00:15:45,097
the transport view you'll see in just
about that you

254
00:15:45,097 --> 00:15:49,816
we had that for you and that allows me
to control the transporter the host

255
00:15:50,689 --> 00:15:56,716
I can do recording

256
00:15:56,959 --> 00:16:03,959
sorry I'm no doctor jerry it's too early
in the morning for that when she get the

257
00:16:04,079 --> 00:16:04,155
idea

258
00:16:04,839 --> 00:16:08,370
and and these are the views and we're
providing for your benefit

259
00:16:08,037 --> 00:16:11,356
so please add up the stat this
functionality tier application

260
00:16:11,689 --> 00:16:16,610
okay said the goal between these user
interface elements are to provide a

261
00:16:16,061 --> 00:16:16,069
consistent

262
00:16:17,041 --> 00:16:21,650
experience for your customers and you do
have some flexibility in controlling

263
00:16:22,019 --> 00:16:23,050
some other than

264
00:16:23,005 --> 00:16:27,041
visual appearances and those controls
and they support a number different

265
00:16:27,041 --> 00:16:29,086
sizes so if you wanna join our mass

266
00:16:29,086 --> 00:16:32,094
I'm you are you can have that if you
want them very small you can do that

267
00:16:33,066 --> 00:16:36,111
and the source code is I'm gonna show
you is very easy to add to your

268
00:16:37,011 --> 00:16:37,105
application

269
00:16:38,005 --> 00:16:42,394
and because these are some classes and
the UN view you can choose to create a

270
00:16:42,439 --> 00:16:46,870
view controller if you want to add them
to a UI pop overview on your iPad

271
00:16:46,087 --> 00:16:50,124
or if the example demonstrated if you
want to embed that directly in the

272
00:16:51,024 --> 00:16:53,363
content in your app you can do that as
well

273
00:16:53,579 --> 00:16:57,370
let's take a look at the code we a.m.

274
00:16:57,037 --> 00:17:01,075
we import the umbrella header and this
case I'm demonstrating had

275
00:17:01,075 --> 00:17:06,100
the switcher view from a nap file see
going to a be a drag out your UI view

276
00:17:07,000 --> 00:17:10,699
assign that to be the class and the sea
and trap idea switcher view

277
00:17:10,699 --> 00:17:15,711
create an outlet for that deal and then
and that you didn't load method in

278
00:17:15,819 --> 00:17:19,833
and we specified the visual a parent's

279
00:17:19,959 --> 00:17:22,966
that deal and then we need to associate

280
00:17:23,659 --> 00:17:28,030
in our DNA with that view so that it can
automatically find the other APs

281
00:17:28,003 --> 00:17:29,024
interconnected

282
00:17:29,024 --> 00:17:32,026
and that's all there is to it

283
00:17:32,026 --> 00:17:37,104
and creating them transport view
programmatically is this example shows

284
00:17:38,004 --> 00:17:43,005
we create the view specify initial size
and location in that deal

285
00:17:43,014 --> 00:17:46,523
configured some visual apparent says

286
00:17:46,649 --> 00:17:50,030
associate and output idan it with the
deal

287
00:17:50,003 --> 00:17:55,022
and then finally we add that transport
view as a sub your main contact

288
00:17:55,049 --> 00:18:01,054
okay now I'd like to switch gears a
little bit now

289
00:18:01,549 --> 00:18:04,890
back to a V Foundation and the rest my

290
00:18:04,089 --> 00:18:07,146
presenters including myself will be
focusing on this framework

291
00:18:08,046 --> 00:18:11,122
and some the new enhancements and
ability that we've added 38 at

292
00:18:12,022 --> 00:18:15,088
to add to your application the first to
feature

293
00:18:15,088 --> 00:18:19,092
is for ID again at management and
actually in the idea

294
00:18:20,028 --> 00:18:23,037
component manager this is

295
00:18:23,037 --> 00:18:27,046
a Mac OS 10 your sanity an API

296
00:18:27,046 --> 00:18:31,133
be a deck to see based and it's
primarily designed for ID and a host

297
00:18:32,033 --> 00:18:37,512
applications however as you'll see we do
have some end user features as well

298
00:18:37,809 --> 00:18:41,871
we provide a number of different coring
methods which enable your host to

299
00:18:42,429 --> 00:18:46,510
find the audience and the system given
some criteria for example

300
00:18:46,051 --> 00:18:50,139
number supported channels we have a
simple API for getting information about

301
00:18:51,039 --> 00:18:53,084
each individual idea net

302
00:18:53,084 --> 00:18:56,099
we have some new tagging facilities that
out the mystery

303
00:18:56,099 --> 00:18:59,278
in a moment and finally we have a
centralized

304
00:19:00,169 --> 00:19:05,070
ID in it cash so that if you have
multiple host applications on your

305
00:19:05,007 --> 00:19:05,102
system

306
00:19:06,002 --> 00:19:10,076
when someone hostess and idan at and for
a lot of people there know what large

307
00:19:10,076 --> 00:19:12,715
number them so this can take quite some
time

308
00:19:13,399 --> 00:19:16,630
all the other hearst on the applique and
the system

309
00:19:16,063 --> 00:19:19,112
share that information so they don't
have to perform that exhaust and scan

310
00:19:20,012 --> 00:19:22,085
again

311
00:19:22,085 --> 00:19:26,113
let's take a look at the API and more
detail as I said the username the

312
00:19:27,013 --> 00:19:29,044
foundation in their new

313
00:19:29,044 --> 00:19:32,101
the first class in the AVI Deanna
component manager

314
00:19:33,001 --> 00:19:36,076
and this provides three different search
mechanisms for

315
00:19:36,076 --> 00:19:40,162
for finding ID and it's the first time
which is based on the NS predicate

316
00:19:41,062 --> 00:19:44,741
we can use a sec a sequel base language
to provide strings

317
00:19:45,299 --> 00:19:49,760
which russia and damn and a source code
example later

318
00:19:49,076 --> 00:19:52,112
for finding audience matching a given
criteria

319
00:19:53,012 --> 00:19:57,047
we also have a black base mechanism for
finer programmatic control

320
00:19:57,047 --> 00:20:00,136
and for those are you using all their
her stabs

321
00:20:00,559 --> 00:20:05,220
with our current idea component API we
had a backwards compatibility mode as

322
00:20:05,022 --> 00:20:06,611
well

323
00:20:06,809 --> 00:20:10,858
each in the search and one methodologies
return

324
00:20:11,299 --> 00:20:14,490
and an SRA adid and components

325
00:20:14,049 --> 00:20:19,101
and that class can be used to get
information about the idea yet

326
00:20:20,001 --> 00:20:23,660
now using our prior API if I wanted to
do something like

327
00:20:23,669 --> 00:20:29,682
find Osteria fax did support to channel
and plan to channel output

328
00:20:29,799 --> 00:20:33,000
I have to rate a great deal with code
I'm

329
00:20:33,000 --> 00:20:37,799
that's okay but now at this new API we
can reduce all that to this

330
00:20:37,799 --> 00:20:42,320
simple well again four lines of code the
first half which is retrieving an

331
00:20:42,032 --> 00:20:42,088
intense

332
00:20:42,088 --> 00:20:45,154
and a shared idea unit manager

333
00:20:46,054 --> 00:20:50,098
and here I'm using the block-based
search mechanism to find

334
00:20:50,098 --> 00:20:53,177
all components that pass a specific test

335
00:20:54,077 --> 00:20:58,083
and in this block I'm checking to see if
that tape name

336
00:20:58,083 --> 00:21:01,086
that I i dnt is equal to the

337
00:21:02,013 --> 00:21:06,192
I'm preset string8 didn it a perfect

338
00:21:06,309 --> 00:21:10,480
and then furthermore we're checking to
see if that ID and supports

339
00:21:10,048 --> 00:21:13,123
stereo input and output you on the
tester is a

340
00:21:14,023 --> 00:21:17,107
stop parameter so if you wanted to
return

341
00:21:18,007 --> 00:21:22,076
I'm only the first 10 cents and the idea
component matching this criteria:

342
00:21:22,076 --> 00:21:29,076
you can return yes and the stop would
would and it would stop immediately

343
00:21:30,038 --> 00:21:33,827
okay now I'd like to move on to talk
about tagging

344
00:21:34,169 --> 00:21:37,245
a lot of people especially doctored rate
and studio

345
00:21:37,929 --> 00:21:41,260
has a large number a body in it so
finding the

346
00:21:41,026 --> 00:21:45,121
to rate my and can be a bit challenging
because they're sorted alphabetically or

347
00:21:46,021 --> 00:21:46,097
by

348
00:21:46,097 --> 00:21:52,016
manufacture and there's a lot easier way
for users to find these ideas now

349
00:21:52,889 --> 00:21:53,943
attacking

350
00:21:54,429 --> 00:21:58,491
very similar to a be done with a finder
the previous Mac OS 10 release

351
00:21:59,049 --> 00:22:02,074
users can now specify their own tags

352
00:22:02,299 --> 00:22:06,337
with an ID and in order to create bride
categories remained specific

353
00:22:06,679 --> 00:22:10,777
categories and how they want to organize
their audience

354
00:22:11,659 --> 00:22:15,710
they can apply one or more tags into
different categories the first two which

355
00:22:15,071 --> 00:22:17,074
is a system tag

356
00:22:17,074 --> 00:22:20,077
this is defined by the creator and the
idea at

357
00:22:20,077 --> 00:22:24,146
and for example with them and maverick's
excuse me and the assembly

358
00:22:25,046 --> 00:22:29,054
have to get that name my head I
personally like to win but

359
00:22:29,054 --> 00:22:32,151
I didn't get to go and mister some tags

360
00:22:33,051 --> 00:22:36,102
aren't are defined by the creator and we
as Apple

361
00:22:37,002 --> 00:22:41,601
have added standard tags: told the
audience that we feel would be useful to

362
00:22:41,619 --> 00:22:43,460
my summer users

363
00:22:43,046 --> 00:22:48,505
and you can also have user tags the user
specified by each individual user on the

364
00:22:48,919 --> 00:22:49,967
system's at the end

365
00:22:50,399 --> 00:22:54,404
3 users they can each have their own set
of tags

366
00:22:54,899 --> 00:22:58,700
a tag is a localized string and the
user's on language

367
00:22:58,007 --> 00:23:01,015
sweeter so he doesn't matter they can be
arbitrary

368
00:23:01,078 --> 00:23:04,175
or they can be a predefined type and
these are all in audio component that

369
00:23:05,075 --> 00:23:06,244
age

370
00:23:06,919 --> 00:23:10,440
they can be either based on the tape a
body and

371
00:23:10,044 --> 00:23:14,503
for example a filter or distortion
effect or they can be based on the

372
00:23:14,899 --> 00:23:16,260
intended usage

373
00:23:16,026 --> 00:23:23,026
for example I'm and idan it useful and a
guitar vocal track

374
00:23:25,149 --> 00:23:29,550
now I'd like to show a demo and tagging
and action using them

375
00:23:29,055 --> 00:23:33,078
a modified version and a lab so an A in
lab

376
00:23:33,078 --> 00:23:39,086
in and you we can look at all the tags
associate with all the built-in audience

377
00:23:39,086 --> 00:23:44,095
and here you see that for example the a
time pitch

378
00:23:44,095 --> 00:23:48,157
had to standard tags: that are sissy
with that time effect and pitch

379
00:23:49,057 --> 00:23:53,066
and those are defined by I S and in
addition

380
00:23:54,047 --> 00:23:58,048
you can see that this distortion effect
has to user tags

381
00:23:58,057 --> 00:24:03,125
when specifying this useful for a drum
track and another one for guitar track

382
00:24:04,025 --> 00:24:09,034
and the API also provides developers the
ability to get a list them all day

383
00:24:09,034 --> 00:24:12,343
system defined tags localized in their
language

384
00:24:12,649 --> 00:24:15,940
the running hearst as you can see here

385
00:24:15,094 --> 00:24:18,148
and I can also see all in the user tags
and

386
00:24:19,048 --> 00:24:24,747
that the users assigned to all the ideas
on this system

387
00:24:25,179 --> 00:24:31,990
adding tags care as simple as typing a
new one

388
00:24:31,099 --> 00:24:34,105
now that's been added to that I D and

389
00:24:35,005 --> 00:24:39,054
and I can do a search using this I'm
predicate base and other search

390
00:24:39,054 --> 00:24:41,383
mechanisms

391
00:24:41,869 --> 00:24:44,877
and it will search on the audience
looking for that particular tag

392
00:24:45,669 --> 00:24:48,690
so this is something that's really
exciting and we hope that your

393
00:24:48,069 --> 00:24:52,095
add use this API dad tagging
functionality to your own test

394
00:24:52,095 --> 00:24:53,127
application

395
00:24:54,027 --> 00:24:57,136
let's take a look now at papi

396
00:24:57,379 --> 00:25:02,090
to find an ID in it with the specific
tag in this example for me is the INS

397
00:25:02,009 --> 00:25:03,228
predicate

398
00:25:03,309 --> 00:25:07,393
and filtering mechanism Hey Ram defining
a predicate

399
00:25:08,149 --> 00:25:11,210
said that I'm the the

400
00:25:11,021 --> 00:25:15,025
component past due had the alt tag
name's property

401
00:25:15,025 --> 00:25:18,914
containing a particular string in this
case my favorite tag

402
00:25:19,139 --> 00:25:24,141
and this is the identical searching that
she just signed my demo

403
00:25:24,159 --> 00:25:28,240
when seem to find the predicate you get
a instance they shared a deal

404
00:25:28,024 --> 00:25:33,049
manager and then call components
matching predicate which returns

405
00:25:33,049 --> 00:25:38,055
an array

406
00:25:39,009 --> 00:25:42,058
to get a left and the tags associate
with this

407
00:25:42,058 --> 00:25:47,076
particular adid a component me is the
zyrtec names property

408
00:25:47,076 --> 00:25:51,100
you can assign to that as well and in
this example I'm adding two tags to the

409
00:25:52,000 --> 00:25:55,023
idea net

410
00:25:55,023 --> 00:25:59,023
we can get all tags for specific
component in these law include the user

411
00:25:59,023 --> 00:26:01,109
tags as well as a system tags:

412
00:26:02,009 --> 00:26:07,044
all tag name's property we can get a
localized list them all the standard

413
00:26:07,044 --> 00:26:10,122
system tags by getting the component
manager and then calling the standard

414
00:26:11,022 --> 00:26:13,078
localize tag name's property

415
00:26:13,078 --> 00:26:16,967
this is what I was just playing and a
pop-up and my demo

416
00:26:17,669 --> 00:26:22,330
and finally I can get a list them all
the local a stag cities user has

417
00:26:22,033 --> 00:26:24,842
assigned across all the ideas on the
system

418
00:26:25,139 --> 00:26:29,214
and that again Nissan my demo

419
00:26:29,889 --> 00:26:33,850
for those are being that ship idea units
and you want to add your own built-in

420
00:26:33,085 --> 00:26:35,144
text does it. in its

421
00:26:35,909 --> 00:26:39,330
I'm you need to go into here audio
component banned all

422
00:26:39,033 --> 00:26:44,122
and in your info dat P last look at your
audio component dictionary and add a tag

423
00:26:44,419 --> 00:26:46,080
section

424
00:26:46,008 --> 00:26:51,047
these first two items are examples
abusing standard tags:

425
00:26:51,119 --> 00:26:54,124
and the third item is a custom tag

426
00:26:54,169 --> 00:26:57,710
see you can have that be something if
meaningful two-year

427
00:26:57,071 --> 00:27:02,040
on company for example if you have a
sweet like this over affect package you

428
00:27:02,679 --> 00:27:05,080
can add that tag

429
00:27:05,008 --> 00:27:09,100
if you do so you can also I'm localize
that tag by adding an audience tag

430
00:27:10,000 --> 00:27:14,429
that string volunteer banned all and
then adding localization screech

431
00:27:14,429 --> 00:27:19,250
language that you wish to support and
please do not localize in Amherst and

432
00:27:19,025 --> 00:27:23,154
I'm system tags: we've already done so
for you

433
00:27:23,379 --> 00:27:27,408
so in summary if your'e if you're a host
developer please

434
00:27:27,669 --> 00:27:33,610
adopt the AB i do. company manager API
so users can tag all their IANS

435
00:27:33,061 --> 00:27:38,145
and and if you're not an end developer
please add some tags to your audience

436
00:27:39,045 --> 00:27:43,504
so without further ado i'd like to
turnover this session to Eric Johnson

437
00:27:43,909 --> 00:27:44,923
whole be discussing

438
00:27:45,049 --> 00:27:48,135
temps and chicks in new functionality in
abit a session

439
00:27:48,909 --> 00:27:52,918
Eric of

440
00:27:53,809 --> 00:27:58,500
good morning so I'll be continuing on
with that a V Foundation framework

441
00:27:58,005 --> 00:28:02,374
and this time we're on ISL s only with
abit a session

442
00:28:02,869 --> 00:28:06,600
answered today we're just gonna spend a
few minutes talking about some

443
00:28:06,006 --> 00:28:09,018
best practices focusing on managing your

444
00:28:09,072 --> 00:28:13,121
sessions activation stay and then of the
talking about just a little bit anything

445
00:28:14,021 --> 00:28:17,029
and I was a before we dive n

446
00:28:18,001 --> 00:28:21,800
I wanted to call your attention to an
updated I efficient programming guide

447
00:28:21,809 --> 00:28:22,867
that's available

448
00:28:23,389 --> 00:28:28,070
on developer not Apple DICOM Athens with
all you all last year at this time

449
00:28:28,007 --> 00:28:31,096
at this guide has been updated so
desperate

450
00:28:31,159 --> 00:28:35,186
have been rewritten in terms of AV audio
session so it's no longer referring to

451
00:28:35,429 --> 00:28:35,780
the

452
00:28:35,078 --> 00:28:38,727
deprecated capi at a really great up day

453
00:28:39,429 --> 00:28:42,820
and and for those of you who are maybe
not that familiar with

454
00:28:42,082 --> 00:28:45,911
audio session hatteras a talk from two
years ago

455
00:28:46,649 --> 00:28:49,710
where Tory talked about idea session

456
00:28:49,071 --> 00:28:52,920
and also multi route idea and I'll

457
00:28:53,559 --> 00:28:58,270
art so let's dive into you talking about
at managing your sessions activation

458
00:28:58,027 --> 00:28:59,060
stay

459
00:28:59,006 --> 00:29:02,050
so there's there's your application stay
and then the

460
00:29:03,004 --> 00:29:06,036
there's already a session state and
their their separate things I managed

461
00:29:06,036 --> 00:29:07,825
independently of each other

462
00:29:08,149 --> 00:29:11,710
so if you've been doing development for
I'll ask you're probably familiar

463
00:29:11,071 --> 00:29:14,910
with ap States so this is whether your
app is running or not

464
00:29:15,549 --> 00:29:19,586
whether it's in the foreground in the
background it's been suspended

465
00:29:19,919 --> 00:29:23,200
here audio session activation state is
binary

466
00:29:23,002 --> 00:29:26,171
it's either an active or active

467
00:29:26,369 --> 00:29:30,010
once you've made your session active you
do need to be prepared to handle

468
00:29:30,001 --> 00:29:31,150
interruptions

469
00:29:31,159 --> 00:29:36,720
and we'll talk about what that means so
let's look at an example of how

470
00:29:36,072 --> 00:29:39,161
an audit session state changes over time

471
00:29:39,809 --> 00:29:42,815
so here have were or on an iPhone we
have our

472
00:29:43,409 --> 00:29:47,432
our application on top our audio session
I would say that we're developing a game

473
00:29:47,639 --> 00:29:48,510
app

474
00:29:48,051 --> 00:29:51,076
and then on the bottom we have the phone
buddy session

475
00:29:51,076 --> 00:29:54,175
and right now the users not in a phone
call

476
00:29:54,859 --> 00:29:59,090
and have a launcher app yet for both but
sessions are idle

477
00:29:59,009 --> 00:30:03,070
an active now the user launches are up

478
00:30:03,007 --> 00:30:07,486
when we first came in the foreground our
idea session is still an active

479
00:30:08,179 --> 00:30:11,580
and because we're a game app we want to
make our session active

480
00:30:11,058 --> 00:30:15,060
when we're in the foreground so that we
can be ready to play idea will do that

481
00:30:15,078 --> 00:30:18,146
and we're going to just play some music
so we're for now happily playing music

482
00:30:19,046 --> 00:30:22,102
in the foreground with an active idea
session

483
00:30:23,002 --> 00:30:26,057
said then a the phone

484
00:30:26,057 --> 00:30:29,073
phone starts ringing we get interrupted
by so

485
00:30:29,073 --> 00:30:32,742
the system friendless an interruption
event

486
00:30:33,399 --> 00:30:36,400
I'm the phone Friday session becomes
active in

487
00:30:36,409 --> 00:30:40,508
plays the ringtone and the user decides
to accept the call

488
00:30:41,399 --> 00:30:44,580
so the phone Friday sessions stays
active and

489
00:30:44,058 --> 00:30:48,657
are on his session has been interrupted
so were inactive

490
00:30:49,179 --> 00:30:53,520
and then the the user and call thing
that says goodbye

491
00:30:53,052 --> 00:30:56,150
and now the system is going to deliver
an end interruption event to our audio

492
00:30:57,005 --> 00:30:58,554
session

493
00:30:59,049 --> 00:31:03,380
and we're going to use that has a a
signal to make our session active again

494
00:31:03,038 --> 00:31:07,062
and resume playback and we continue in
the state

495
00:31:07,062 --> 00:31:10,075
so this is a a typical example how

496
00:31:10,075 --> 00:31:13,171
I'll something like a game application
interacts with the phones

497
00:31:14,071 --> 00:31:19,073
at the phone app Sunday Session on an
iPhone

498
00:31:19,073 --> 00:31:22,109
so the way that you need to manage your
applications

499
00:31:23,009 --> 00:31:27,188
I efficient stay is actually going to
depend on how you use audio

500
00:31:27,269 --> 00:31:30,510
and we've identified a number of
different types of applications

501
00:31:30,051 --> 00:31:33,063
that commonly used audio on iowa's

502
00:31:33,063 --> 00:31:36,088
and we don't have time to talk about all
these this morning and you probably

503
00:31:36,088 --> 00:31:36,170
bored to death

504
00:31:37,007 --> 00:31:40,106
we did after it is going to talk about a
few the if

505
00:31:41,069 --> 00:31:45,112
so let's continue on with the idea that
we're developing a game app

506
00:31:46,012 --> 00:31:49,411
surfer game app usually what we
recommend is the

507
00:31:49,519 --> 00:31:53,545
when you're in the foreground you want
to have your own decision active

508
00:31:53,779 --> 00:31:57,010
so a good place to make air I session
active

509
00:31:57,001 --> 00:32:00,800
is in the App delegates application to
become active nothin

510
00:32:00,809 --> 00:32:03,871
so that will cover the case when you're
being launched here

511
00:32:04,429 --> 00:32:08,340
coming from the background into the
foreground or if you're already in the

512
00:32:08,034 --> 00:32:08,863
foreground

513
00:32:09,169 --> 00:32:13,194
and the user had have swept up the
control panel and then dismissed

514
00:32:13,419 --> 00:32:17,507
to be covered in each of those cases so
once you've made your session active you

515
00:32:18,299 --> 00:32:18,371
can leave it

516
00:32:19,019 --> 00:32:23,840
active but you do need to be prepared to
deal with interruptions

517
00:32:23,084 --> 00:32:26,160
so if you get a begin interruption event
you should update your

518
00:32:27,006 --> 00:32:30,685
internal state so that you know that
your paused

519
00:32:31,279 --> 00:32:35,279
and then if you get in and interruption
event that's your opportunity to make

520
00:32:35,279 --> 00:32:36,320
your session active

521
00:32:36,032 --> 00:32:40,035
answers and audio playback and this is
just like the example that we looked at

522
00:32:40,062 --> 00:32:43,621
just a few minutes ago

523
00:32:44,179 --> 00:32:48,240
media playback caps need to manage their
recession state a little bit differently

524
00:32:48,789 --> 00:32:52,120
so i'm talking about. applications like
the built-in music app

525
00:32:52,012 --> 00:32:55,084
or podcasts are streaming radio and
these are the types of applications that

526
00:32:55,084 --> 00:32:56,153
we usually have

527
00:32:56,909 --> 00:33:01,380
a play/pause button and there what we
refer to as non mixable meaning

528
00:33:01,038 --> 00:33:04,120
that and I'll interrupt the audio other
NYMEX IPL

529
00:33:05,002 --> 00:33:09,093
idea sessions suffer these types of
applications we recommend

530
00:33:10,011 --> 00:33:13,082
that instead of making your session
active immediately when it for granted

531
00:33:13,082 --> 00:33:13,941
that you weigh

532
00:33:14,679 --> 00:33:17,778
until the user presses the play button
and the reason that we give you that

533
00:33:18,669 --> 00:33:19,350
advice

534
00:33:19,035 --> 00:33:22,083
is sometimes the user brings you happen
to the foregoing just to see if they

535
00:33:22,083 --> 00:33:22,134
have a

536
00:33:23,034 --> 00:33:26,723
a particular podcast episode downloaded
or see if they have a song in the

537
00:33:27,029 --> 00:33:27,990
library

538
00:33:27,099 --> 00:33:30,638
and they don't necessarily wanna
interrupt other audio that was playing

539
00:33:31,529 --> 00:33:34,710
that's going to wait until they press
play

540
00:33:34,071 --> 00:33:37,163
so like in the case of a game app once
you've made your session active you can

541
00:33:38,063 --> 00:33:43,108
you can leave act in but again you need
to be prepared to handle interruptions

542
00:33:44,008 --> 00:33:47,016
so if you get it began interruption
event you should update your UI

543
00:33:47,088 --> 00:33:50,617
became a play/pause button thinkin good
time to change that stay

544
00:33:51,409 --> 00:33:56,260
and also keep track of your internal
states that you know their powers

545
00:33:56,026 --> 00:33:59,070
I one thing you do not need to do is you
do not need to make your session

546
00:33:59,007 --> 00:34:02,326
inactive because the system is already
done done that for you

547
00:34:03,019 --> 00:34:06,590
that that's what the interruption is so
then

548
00:34:06,059 --> 00:34:09,075
if you get in and interruption event we
ask

549
00:34:09,075 --> 00:34:12,106
that you honor the should resume option

550
00:34:13,006 --> 00:34:16,605
so this option is part iv: the in for a
dictionary that's part of that

551
00:34:16,659 --> 00:34:17,660
notification

552
00:34:17,669 --> 00:34:20,703
that the first inning giving you head
that it's okay to make your session

553
00:34:21,009 --> 00:34:21,620
active

554
00:34:21,062 --> 00:34:25,301
and to immediately resume playback if
you don't see that option

555
00:34:25,859 --> 00:34:31,620
has partnered occasion the nation way
user press play again

556
00:34:31,062 --> 00:34:34,125
okay so we've talked about Ag for gay
maps and media playback abs

557
00:34:35,025 --> 00:34:40,044
when you would make a session active
what about making your session inactive

558
00:34:40,044 --> 00:34:43,052
so if you were something like a
navigation

559
00:34:43,052 --> 00:34:46,052
or fitness app here typically going to
be playing

560
00:34:46,052 --> 00:34:49,561
short at short prompt the body 0

561
00:34:50,029 --> 00:34:53,790
and you're going to be using the duck
others

562
00:34:53,079 --> 00:34:56,438
category option which will lower the
volume other

563
00:34:57,149 --> 00:35:00,166
audio applications on the system so it's
important be

564
00:35:00,319 --> 00:35:03,810
when you're done playing short prompt
that you make your session inactive

565
00:35:03,081 --> 00:35:07,090
so that the other audio was able to
resume it for long

566
00:35:08,071 --> 00:35:12,100
if you're Voice over IP at at her cat
app

567
00:35:13,000 --> 00:35:16,066
or maybe one of these abt that has like
kind of a bright

568
00:35:16,066 --> 00:35:21,071
a kind of like a browser view we're
playing short videos

569
00:35:21,071 --> 00:35:25,160
then and you're usually going to be what
we refer to as non mix well meaning that

570
00:35:25,799 --> 00:35:26,920
you're gonna interrupt

571
00:35:26,092 --> 00:35:29,135
other audio and so it's important that
when you're done

572
00:35:30,035 --> 00:35:33,098
playing idea that you make your session
inactive so that

573
00:35:33,098 --> 00:35:36,107
other sessions are able to resume

574
00:35:37,088 --> 00:35:40,131
and it's a good idea to use the notify
others on

575
00:35:41,031 --> 00:35:45,040
deactivation option when you make your
session act inactive

576
00:35:45,004 --> 00:35:48,031
and that way the system is able to and

577
00:35:48,067 --> 00:35:51,089
tell and interrupted on a session that
it's okay for them to you

578
00:35:51,089 --> 00:35:54,143
resume

579
00:35:55,043 --> 00:35:58,892
alright so now with shift gears a little
bit and talk about

580
00:35:59,279 --> 00:36:02,460
managing your secondary audio in
response to you

581
00:36:02,046 --> 00:36:05,135
other audio on the system playing so

582
00:36:05,549 --> 00:36:09,870
first let me explain what I mean by
secondary idea primary idea

583
00:36:09,087 --> 00:36:13,092
so at what they were developing a game
application our primary audio

584
00:36:14,037 --> 00:36:17,088
is going to be our are sound effects are
explosion

585
00:36:17,088 --> 00:36:21,091
beeps and boops short but the dialogue
and it's the kind of idea that really

586
00:36:22,018 --> 00:36:24,018
enhances the gameplay

587
00:36:24,018 --> 00:36:27,447
and if of a kind of idea that if the
user

588
00:36:27,609 --> 00:36:31,330
was listening to music when they launch
app he still wanted to play

589
00:36:31,033 --> 00:36:35,041
and suck it and make something with the
other music

590
00:36:35,041 --> 00:36:38,047
by secondary audio I'm really talking
about your soundtrack

591
00:36:38,047 --> 00:36:41,606
missus audio where it also enhances the
gameplay

592
00:36:42,029 --> 00:36:46,420
but if the user was previously listening
to their music for the podcast

593
00:36:46,042 --> 00:36:49,058
you just the same have your soundtrack
be needed

594
00:36:49,058 --> 00:36:53,114
and then if they're at the user stops
their music playback in their podcast

595
00:36:54,014 --> 00:36:54,017
and

596
00:36:54,044 --> 00:36:57,077
you'd like to have your soundtrack
resume so

597
00:36:57,077 --> 00:37:00,078
and I was 8 we've added a bit of new API

598
00:37:00,087 --> 00:37:05,090
to help you do this we've added a new
property and a new notification

599
00:37:06,017 --> 00:37:10,023
the property is called secondary audio
should be silenced hand

600
00:37:10,023 --> 00:37:13,098
as the name implies that the hint but
the system is giving you

601
00:37:13,098 --> 00:37:16,175
that is a good time to new secondary
idea

602
00:37:17,075 --> 00:37:21,098
so this is meant to be used by abt there
in the foreground

603
00:37:21,098 --> 00:37:25,125
and we recommend that you would check
this property and application to become

604
00:37:26,025 --> 00:37:29,104
active going along with any property

605
00:37:30,004 --> 00:37:33,070
is our new notification this is the

606
00:37:33,007 --> 00:37:37,066
any idea session silence secondary idea
and notification another mouthful

607
00:37:38,029 --> 00:37:42,125
after this early morning at for this
notification will be delivered taps

608
00:37:43,025 --> 00:37:46,039
there in the foreground with active
other sessions

609
00:37:46,039 --> 00:37:49,044
and it's kind of similar to our
interruption notification that its

610
00:37:49,089 --> 00:37:52,171
it's two-sided there's a begin events
and there's an end to that

611
00:37:53,071 --> 00:37:56,430
how all wrapped up in the same
notification

612
00:37:57,069 --> 00:38:02,094
so when you get to begin I'm found
secondary idea health and education

613
00:38:02,319 --> 00:38:06,270
that means that a good time to meet your
secondary audio and if you get the end

614
00:38:06,027 --> 00:38:06,616
event

615
00:38:06,859 --> 00:38:10,874
thing in time to resume soundtrack so
let's look at what this looks like an

616
00:38:11,009 --> 00:38:13,011
action

617
00:38:13,029 --> 00:38:17,100
so on the far right we have the built-in
music app hand it's currently in the

618
00:38:17,001 --> 00:38:18,095
back and it's not playing audio

619
00:38:19,004 --> 00:38:23,013
on the far left we have our game app
that we're developing

620
00:38:23,013 --> 00:38:27,014
so we're playing our primary audience on
a fax and we're also playing our

621
00:38:27,014 --> 00:38:27,633
soundtrack

622
00:38:27,759 --> 00:38:30,765
because there is no other music playing

623
00:38:30,819 --> 00:38:35,460
and in the middle we have I was hoping
to negotiate things

624
00:38:35,046 --> 00:38:38,098
so the user a has his headphones plugged
in

625
00:38:38,098 --> 00:38:41,147
any precedent that middle button and the
music app

626
00:38:42,029 --> 00:38:45,680
response remote-controlled answer is
that as a signal to

627
00:38:45,068 --> 00:38:48,149
begin playback a music app also

628
00:38:49,049 --> 00:38:53,054
informs I last sentence using its audio
output

629
00:38:53,054 --> 00:38:57,096
and for then the system is able to pass
and to begin notification to our apt

630
00:38:57,096 --> 00:39:00,145
that's in the foreground and in response
to that we can meet

631
00:39:01,045 --> 00:39:05,081
soundtrack so are our app is still the
foreground the only thing that's really

632
00:39:05,081 --> 00:39:06,152
changed is that the user

633
00:39:07,052 --> 00:39:11,054
use their middle button 10 to play their
music

634
00:39:11,072 --> 00:39:16,158
and we've responded to the notification
that we got from the system

635
00:39:17,058 --> 00:39:20,797
for now some time passes were in the
state for a while and the user presses

636
00:39:21,319 --> 00:39:25,370
the middle button again for music app
response by

637
00:39:25,037 --> 00:39:29,100
pausing its playback telling the system
that is positive value out but

638
00:39:30,000 --> 00:39:33,015
and in the system is able to send the
end

639
00:39:33,015 --> 00:39:36,063
notification to our apt its own for
gramm

640
00:39:36,063 --> 00:39:39,160
and in response to that we resume our
soundtrack

641
00:39:40,006 --> 00:39:43,185
so hopefully miss will be pretty easy to
use

642
00:39:43,779 --> 00:39:48,940
am there's a won the property and then
the two sided notification that you can

643
00:39:48,094 --> 00:39:51,115
use to manage your soundtrack

644
00:39:52,015 --> 00:39:56,104
so I'm kinda wanna similar thread and in
the past we've given advice

645
00:39:57,004 --> 00:40:00,050
about how you can manager your secondary
audio

646
00:40:00,005 --> 00:40:03,028
based on the is other idea playing
property

647
00:40:03,073 --> 00:40:07,079
and we had given advice about and
choosing between the

648
00:40:07,079 --> 00:40:10,378
me. category or so and yet based on

649
00:40:11,089 --> 00:40:14,400
the state has property what we're
recommending now

650
00:40:14,004 --> 00:40:17,032
is that if you're the type of
application that you just use the ambien

651
00:40:17,068 --> 00:40:18,227
category

652
00:40:18,839 --> 00:40:22,841
and the news the new property and the
new notification to manager soundtrack

653
00:40:22,859 --> 00:40:25,957
arianna and things over to the quiet
he's gonna talk about new utility

654
00:40:26,839 --> 00:40:27,480
classes

655
00:40:27,048 --> 00:40:31,054
may be finished thank you good morning
and acquired I'm an engineer in the core

656
00:40:31,054 --> 00:40:32,083
idea group

657
00:40:32,083 --> 00:40:35,149
and I'd like to talk to you about some
new idea classes in the 80 Foundation

658
00:40:36,049 --> 00:40:38,113
framework

659
00:40:39,013 --> 00:40:42,099
are getting will start out with some
background and tell you what we're up to

660
00:40:42,099 --> 00:40:43,135
and why

661
00:40:44,035 --> 00:40:47,037
I the most are looking through this
class is one by one

662
00:40:47,037 --> 00:40:50,066
and all type things up at the end with
an example

663
00:40:50,066 --> 00:40:54,114
so in the past our car audio in audio
tool box API's

664
00:40:55,014 --> 00:40:58,050
they're very powerful but they're not
always easy for

665
00:40:58,005 --> 00:41:01,018
developers to get their hands around at
the beginning

666
00:41:01,063 --> 00:41:04,982
we've tried to work around this by
providing some C plus plus utility

667
00:41:05,549 --> 00:41:06,540
classes

668
00:41:06,054 --> 00:41:09,091
an RS 2k and that's helped to some
extent

669
00:41:09,091 --> 00:41:14,152
I but example code gets copied around it
evolves over time

670
00:41:15,052 --> 00:41:18,121
and with we think it's best in the long
run if we sort of solidified these

671
00:41:19,021 --> 00:41:19,102
things

672
00:41:20,002 --> 00:41:24,033
informal API and that or providing now
with these classes in the V Foundation

673
00:41:24,033 --> 00:41:25,232
framework

674
00:41:25,529 --> 00:41:28,980
starting with Mac OS 10 Tan Tan Tan Tan
and

675
00:41:28,098 --> 00:41:31,146
Iowa State

676
00:41:32,046 --> 00:41:36,155
so our goals here we don't want to make
a complete break with the past

677
00:41:36,569 --> 00:41:40,020
we want to build on what we've already
got

678
00:41:40,002 --> 00:41:43,531
I'm so a we're going to

679
00:41:43,549 --> 00:41:47,080
in many cases wrap our existing
low-level see structures

680
00:41:47,008 --> 00:41:50,070
inside objective-c objects and in doing
so

681
00:41:50,007 --> 00:41:53,034
these lower levels his structures become
easier to build

682
00:41:53,097 --> 00:41:57,142
but we can also extract them from our
objective see objects and passed them to

683
00:41:58,042 --> 00:42:01,077
the low-level API might already be using

684
00:42:01,077 --> 00:42:05,094
and this is a philosophy we is also with
the the Audioengine

685
00:42:05,094 --> 00:42:09,147
which will beat examining and more
detail in the next session here

686
00:42:10,047 --> 00:42:13,100
and I should also mention an overriding
goal here is for us to stay

687
00:42:14,000 --> 00:42:17,012
real time say which isn't always easy
with objective-c

688
00:42:17,012 --> 00:42:20,015
we can't access methods

689
00:42:20,015 --> 00:42:23,044
or properties on the idea rendering
throwed

690
00:42:23,044 --> 00:42:26,963
I'm so we've taken some great care to do
that in our implementations

691
00:42:27,359 --> 00:42:30,540
and as we go I'll give you a couple took
samples a

692
00:42:30,054 --> 00:42:33,088
places where you need to do this to be
aware

693
00:42:33,088 --> 00:42:37,737
real time issues when you're using these
classes

694
00:42:38,529 --> 00:42:41,730
okay so sure the classes will be looking
at today

695
00:42:41,073 --> 00:42:45,137
and the session I at the bottom there
with in green we've got a the audio

696
00:42:46,037 --> 00:42:47,073
format

697
00:42:47,073 --> 00:42:50,852
which has an AB idea channel layout I

698
00:42:51,509 --> 00:42:54,588
in blue we have any idea PCM buffer
which has an audio format

699
00:42:55,299 --> 00:42:58,640
every buffer has a format describing up

700
00:42:58,064 --> 00:43:02,070
and finally we'll be talking about abe
audiophile which uses a the idea PCM

701
00:43:03,024 --> 00:43:04,056
buffer for i/o

702
00:43:04,056 --> 00:43:08,095
and as you would expect to file also has
format object describing

703
00:43:08,095 --> 00:43:13,097
the files data format

704
00:43:13,097 --> 00:43:16,120
so first let's look at it the audio
format

705
00:43:17,002 --> 00:43:21,075
this class describes the the actual
format of daily might find an audio file

706
00:43:21,093 --> 00:43:21,962
or stream

707
00:43:22,799 --> 00:43:26,560
and also the audio you the formidable

708
00:43:26,056 --> 00:43:29,121
they are you might be passing to and
from API's

709
00:43:30,021 --> 00:43:34,063
so are low-level structure here for
describing an audio format is an art

710
00:43:34,063 --> 00:43:36,063
history in basic description

711
00:43:36,063 --> 00:43:39,070
which in retrospect might have been
called audio stream not so basic or

712
00:43:40,033 --> 00:43:44,035
audio stream complete description
occurred there a lot of fields there and

713
00:43:44,035 --> 00:43:47,081
it can be a little challenging to get
them all set up consistently especially

714
00:43:47,081 --> 00:43:48,156
for PCM format

715
00:43:49,056 --> 00:43:53,275
I'm but you know the beauty of the
structures that it describes just about

716
00:43:53,779 --> 00:43:54,700
everything

717
00:43:54,007 --> 00:43:57,052
we would want to use to describe

718
00:43:58,015 --> 00:44:01,073
an idea for map but again it's a little
challenging

719
00:44:01,073 --> 00:44:04,162
but in any case you can always create an
AV audio format

720
00:44:05,062 --> 00:44:08,069
from an artist reinvested description
which you might have obtained from

721
00:44:08,069 --> 00:44:09,091
low-level API

722
00:44:09,091 --> 00:44:12,094
and you can always access stream
description:

723
00:44:13,021 --> 00:44:16,115
promenade the audio format

724
00:44:17,015 --> 00:44:22,049
but now we can move on to other ways to
interact with the idea for map

725
00:44:22,049 --> 00:44:29,049
on so in the past we've had this concept
of canonical format

726
00:44:29,052 --> 00:44:34,081
and this concept goes back to about 2002
and Mac or standpoint our time point one

727
00:44:34,549 --> 00:44:35,740
or so

728
00:44:35,074 --> 00:44:39,077
so this format was floating point 32-bit

729
00:44:40,004 --> 00:44:43,037
the interleaved but then we got along
tile ass

730
00:44:43,037 --> 00:44:47,176
and we couldn't really recommend using
plot everywhere cuz we didn't have the

731
00:44:47,509 --> 00:44:49,514
greatest floating point performance
initially

732
00:44:50,009 --> 00:44:55,980
so I'll for a while canonical is aimed
at 24 fixed point

733
00:44:55,098 --> 00:44:58,119
but because it that's cuz I'm we want to
reunite under

734
00:44:59,019 --> 00:45:02,064
something new now with deprecated the
concept of canonical

735
00:45:02,064 --> 00:45:05,092
formats now we have a week all standard
format

736
00:45:05,092 --> 00:45:09,681
we're back to not let her leave 32-bit
plots on both platforms

737
00:45:10,509 --> 00:45:14,880
so this is the simplest way to construct
a navy audio format now

738
00:45:14,088 --> 00:45:18,146
as with I you can't create a standard
format by specifying just a sample rate

739
00:45:19,046 --> 00:45:21,079
on channel count:

740
00:45:21,079 --> 00:45:25,088
you can also query and hear the audio
format you might come across and find

741
00:45:25,799 --> 00:45:27,970
out if it is a standard format

742
00:45:27,097 --> 00:45:31,116
using the standard property

743
00:45:32,016 --> 00:45:35,110
we've also I provided for

744
00:45:36,001 --> 00:45:40,026
using common formats with AV audio
format

745
00:45:40,035 --> 00:45:43,121
and with we define common formats as
format to it often is and signal

746
00:45:44,021 --> 00:45:44,095
processing

747
00:45:44,095 --> 00:45:49,103
such as 16-bit integers that people use
and that I last saw her other platforms

748
00:45:50,075 --> 00:45:55,117
we also provide for 64 bit parts it's
very easy to create maybe audio format

749
00:45:56,017 --> 00:45:59,079
and wannabes formats by specifying which
one you what

750
00:45:59,079 --> 00:46:02,086
the sample rate channel count whether
it's interleaved you can query any

751
00:46:03,049 --> 00:46:05,108
format to see if it is some common
format

752
00:46:06,008 --> 00:46:09,707
or something else using the comment form
at

753
00:46:09,779 --> 00:46:13,812
property

754
00:46:14,109 --> 00:46:19,184
okay so that's it the audio format let's
look at the the idea channel out

755
00:46:19,859 --> 00:46:23,000
briefly here this describes the ordering
or the roles

756
00:46:23,000 --> 00:46:27,004
multiple channels which is especially
important for example in surround sound

757
00:46:27,004 --> 00:46:31,060
you might have left right center we
might have left center right and so on

758
00:46:31,096 --> 00:46:34,163
I it's important to know the actual
order the channels

759
00:46:35,063 --> 00:46:38,158
so every AB audio format may have a navy
audio channel out

760
00:46:39,058 --> 00:46:42,081
and in fact when constructing Navy audio
format

761
00:46:42,081 --> 00:46:45,590
if you're describing three or more
channels you have to tell us what the

762
00:46:46,319 --> 00:46:46,415
layout is

763
00:46:47,279 --> 00:46:51,930
so it becomes an ambiguous to anyplace
else in the system that says that AB

764
00:46:51,093 --> 00:46:52,149
audio format what the order

765
00:46:53,049 --> 00:46:56,049
the channels are so I

766
00:46:56,049 --> 00:47:00,088
the underlying audio channel layout
objectors pretty much exposed the way it

767
00:47:00,529 --> 00:47:03,500
is here you can go look at that and
party a types that age

768
00:47:03,005 --> 00:47:08,072
but we have wrapped up in the audio
channel out for you

769
00:47:09,017 --> 00:47:12,040
okay moving on

770
00:47:12,004 --> 00:47:19,004
now let's look at it the idea PCM buffer

771
00:47:20,009 --> 00:47:25,000
so I paper can be a sort of funny term
when we're dealing with D interleaved

772
00:47:25,000 --> 00:47:28,016
idea because of the audio buffer list
structure

773
00:47:28,016 --> 00:47:32,081
but that aside hi you can pick up that
some players memory for storing your

774
00:47:32,081 --> 00:47:34,360
audio data in any format including

775
00:47:35,089 --> 00:47:38,450
on it early formats compare the
low-level structures

776
00:47:38,045 --> 00:47:42,090
which obvious ones in particular can
also be a bit

777
00:47:42,009 --> 00:47:46,011
a bother to deal with because idea but
for Leicester's variable-length

778
00:47:46,092 --> 00:47:49,541
so you can simply create an AB idea PCM
buffer

779
00:47:50,369 --> 00:47:54,890
will create an idea but for list for you
above the right size

780
00:47:54,089 --> 00:48:00,146
and you can always touch it back out of
PA the idea PCM buffer

781
00:48:01,046 --> 00:48:04,073
here's the initializer so to create a
buffer you

782
00:48:04,073 --> 00:48:09,116
you specify the format and a capacity an
audio sample frames

783
00:48:10,016 --> 00:48:13,115
can always touch back the buffers format

784
00:48:13,259 --> 00:48:16,263
and the capacity with which it was
constructed

785
00:48:16,299 --> 00:48:19,374
and unlike audio buffer list which has a
simple

786
00:48:20,049 --> 00:48:25,066
bite-size for everybody for I'm here
we've separated the concept of capacity

787
00:48:25,219 --> 00:48:25,850
in like

788
00:48:25,085 --> 00:48:28,114
so there's the fixed capacity risk
created with

789
00:48:29,014 --> 00:48:33,052
and the frame length which expresses the
number of currently valid frames in the

790
00:48:33,052 --> 00:48:36,139
buffer

791
00:48:37,039 --> 00:48:40,075
some more methods here to get to the
underlying samples

792
00:48:40,075 --> 00:48:44,854
we provide these simple type safe access
service

793
00:48:45,529 --> 00:48:48,790
and this is good time now to

794
00:48:48,079 --> 00:48:52,098
say a word about real time safety
because bizarre properties and as useful

795
00:48:52,098 --> 00:48:54,142
as they may be for actually getting to
the data

796
00:48:55,042 --> 00:48:58,083
since their properties they may involve
about the lookup

797
00:48:58,083 --> 00:49:01,096
which can in-principle take a

798
00:49:01,096 --> 00:49:04,114
a mess on lookup and

799
00:49:05,014 --> 00:49:08,323
cause you to block so up if you're going
to be using

800
00:49:08,449 --> 00:49:12,000
in the idea PCM boppers on audio
real-time threads

801
00:49:12,000 --> 00:49:15,239
it's best to catch these members and
some say

802
00:49:15,239 --> 00:49:18,285
contacts when you first looking at the
buffer and

803
00:49:18,699 --> 00:49:25,699
I and is does cashed members on the
real-time trade

804
00:49:26,089 --> 00:49:29,106
okay that's piss him but for now we can
look at audiophile switched

805
00:49:29,259 --> 00:49:33,390
perhaps all these other classes together

806
00:49:33,039 --> 00:49:37,104
so here we like to read and write file
so many core idea supported format this

807
00:49:38,004 --> 00:49:38,913
ranges from

808
00:49:38,949 --> 00:49:43,410
m4a mp4 wave cafe I A

809
00:49:43,041 --> 00:49:46,066
and why can't pick up right now I'm so

810
00:49:46,066 --> 00:49:50,625
in accessing the file here we give you a
single act single way to

811
00:49:51,219 --> 00:49:56,252
I'm reading right the file completely
independent the files actual data format

812
00:49:56,549 --> 00:50:01,160
supper 29 Corp encoded format like a
senior at the Los lesser and

813
00:50:01,016 --> 00:50:05,081
mp3 if there's a cut back on the system
in most cases there is

814
00:50:05,081 --> 00:50:08,200
we will transparently to you decode from
that

815
00:50:08,929 --> 00:50:12,670
format as you read the file

816
00:50:12,067 --> 00:50:16,091
similarly when you're running an audio
file we will and code from PC I'm into

817
00:50:16,091 --> 00:50:17,108
that encoded format

818
00:50:18,008 --> 00:50:22,267
if we have an encoder so to do this

819
00:50:22,339 --> 00:50:25,660
the file has this concept of the
processing format

820
00:50:25,066 --> 00:50:28,104
and the processing format is simply the
PCM format

821
00:50:29,004 --> 00:50:32,027
with which you or interact with the file

822
00:50:32,027 --> 00:50:35,036
so you specify that the PCM format when
you create the file

823
00:50:36,017 --> 00:50:39,024
and it has to be either a standard a
common format

824
00:50:39,087 --> 00:50:42,156
the only limitation here is that we
don't permit sample rate conversion as

825
00:50:43,056 --> 00:50:44,058
you read from

826
00:50:44,058 --> 00:50:48,447
or write to a file your processing
format needs to get the same sample rate

827
00:50:48,969 --> 00:50:52,310
has the file itself now after familiar
with the

828
00:50:52,031 --> 00:50:56,089
our little box extended idea prolly PI
this is functionally very some more

829
00:50:56,089 --> 00:51:01,308
that's just a bit some thirty years

830
00:51:02,109 --> 00:51:07,870
so looking now at the initializer is and
some accessories for the audio file

831
00:51:07,087 --> 00:51:11,133
here's initializer for reading from a
file if you don't specify a processing

832
00:51:12,033 --> 00:51:13,037
format

833
00:51:13,037 --> 00:51:16,866
is simply I are I you get the

834
00:51:17,199 --> 00:51:20,900
default behavior which is that your
processing format will be a standard

835
00:51:20,009 --> 00:51:22,100
format

836
00:51:23,081 --> 00:51:26,840
very similarly to create the audio file
for writing

837
00:51:27,569 --> 00:51:31,330
the only extra information you need to
give us as a settings dictionary

838
00:51:31,033 --> 00:51:35,046
this is the same settings dictionary
past to AP audio recorder

839
00:51:35,046 --> 00:51:39,845
and and there are there are keys which
specify the file format you want to use

840
00:51:40,259 --> 00:51:43,286
and in the case a example for example AC

841
00:51:43,529 --> 00:51:47,562
you can specify the bitrate and any
other encoder settings those around

842
00:51:47,859 --> 00:51:51,170
the settings pictionary

843
00:51:51,017 --> 00:51:54,042
so once had you've got a file you can
always

844
00:51:54,042 --> 00:51:57,114
access back the actual file format on
desk

845
00:51:58,014 --> 00:52:03,083
so that might be for example AC 44 kill
her sister channels

846
00:52:03,083 --> 00:52:06,106
but you can also query the processing
format

847
00:52:07,006 --> 00:52:11,015
with which you created the file and in
the case and these two

848
00:52:11,015 --> 00:52:14,040
simplest initialize urs does would be

849
00:52:14,004 --> 00:52:17,102
a floating-point 32-bit same sample rate
is the file

850
00:52:18,038 --> 00:52:23,041
same channel count as the file

851
00:52:23,041 --> 00:52:26,075
okay so to read and write from if the
audio files

852
00:52:26,075 --> 00:52:29,274
there's a simple method read into buffer
that will simply fill

853
00:52:29,949 --> 00:52:33,120
the AV audio PCM buffer to its capacity

854
00:52:33,012 --> 00:52:36,098
assuming you have you don't at the end
of file

855
00:52:36,098 --> 00:52:39,567
right from buffer is a little different
and that it looks like the book looks at

856
00:52:40,449 --> 00:52:41,501
the buffers frame length

857
00:52:41,969 --> 00:52:46,008
rather the compact and the capacity so
writes all about the ballot frames

858
00:52:46,359 --> 00:52:49,870
from that buffer to the file

859
00:52:49,087 --> 00:52:53,142
and you can do random access I when
reading from audiophiles

860
00:52:54,042 --> 00:52:57,056
so this is like the standard C++
libraries seek

861
00:52:57,056 --> 00:53:01,235
and tell functions absecon of top

862
00:53:01,739 --> 00:53:06,100
you can query the frame position to see
where you are when reading an audiophile

863
00:53:06,001 --> 00:53:10,053
and I you can also seeks a different
position in the file by setting the

864
00:53:10,062 --> 00:53:11,144
frame position pointer

865
00:53:12,044 --> 00:53:16,713
before you read and the next three to
four percent sequentially from that

866
00:53:17,109 --> 00:53:22,530
point

867
00:53:22,053 --> 00:53:25,106
occurred like to tie all these classes
together now at the short example

868
00:53:26,006 --> 00:53:29,043
in about four screens here we'll see
what it's like to

869
00:53:29,043 --> 00:53:32,121
open an audiophile extract some basic
information

870
00:53:33,021 --> 00:53:36,043
from at and read through every sample in
the file

871
00:53:36,043 --> 00:53:39,056
secretary happen at for reading

872
00:53:39,056 --> 00:53:45,061
simply pass a URL I I'm using the very
end here that's percent but I'm passing

873
00:53:45,061 --> 00:53:50,083
PC employed 32 anyways I could have left
those often gotten a standard format

874
00:53:50,083 --> 00:53:56,084
I'm going to fetch some basic
information from the File and Printer

875
00:53:56,093 --> 00:53:59,149
including the files on disc format

876
00:54:00,049 --> 00:54:03,053
and the processing for map I can query

877
00:54:03,089 --> 00:54:06,132
the audio files like 10 frames sample
friends

878
00:54:07,032 --> 00:54:10,065
and I can convert that Mike than friends

879
00:54:10,065 --> 00:54:13,071
to a duration by dividing by the file
separate

880
00:54:13,071 --> 00:54:16,117
okay next time when you create a PCM
buffer to read from

881
00:54:17,017 --> 00:54:21,019
sense the file might be large I don't
wanna try to read it all into memory

882
00:54:21,037 --> 00:54:21,102
wats

883
00:54:22,002 --> 00:54:25,069
so I'm gonna live through 228k sample
frame set a time

884
00:54:25,069 --> 00:54:28,070
someone to create a buffer with that
capacity

885
00:54:28,079 --> 00:54:31,148
Anderson to screen the past the audio
files

886
00:54:32,048 --> 00:54:36,112
processing format when when allocating
this buffer and that ensures that the

887
00:54:37,012 --> 00:54:38,073
boppers the same format

888
00:54:38,073 --> 00:54:43,107
but the file will begin me and

889
00:54:44,007 --> 00:54:47,053
here I'm start I'm I'm ready to start
reading through the file

890
00:54:47,053 --> 00:54:50,151
and I'm going to read one buffer at a
time until they get the and

891
00:54:51,051 --> 00:54:54,083
second query the current prime position
and see if it's like

892
00:54:54,083 --> 00:54:59,149
last stand like five discovered earlier
I can read into buffer which will look

893
00:55:00,049 --> 00:55:00,121
and feel

894
00:55:01,021 --> 00:55:05,095
told the buffer to capacity I can double
check to see if I'm done

895
00:55:05,095 --> 00:55:10,107
by saying if I got a0 like buffer and

896
00:55:11,007 --> 00:55:14,053
is a lot of code that but it boils down
to

897
00:55:14,053 --> 00:55:19,081
24 loops the outer one is walking
through all the channels on the buffer

898
00:55:19,081 --> 00:55:20,127
for multi-channel file

899
00:55:21,027 --> 00:55:24,063
and than the inner loop

900
00:55:24,063 --> 00:55:27,072
will look at every sample in that proper

901
00:55:27,072 --> 00:55:30,081
so given every sample

902
00:55:30,081 --> 00:55:34,083
I can look at its absolute level and see
if that's the loudest sample were

903
00:55:34,083 --> 00:55:38,108
if it's louder than the latter sample I
found so far enough so I can record that

904
00:55:39,008 --> 00:55:39,063
level

905
00:55:39,063 --> 00:55:43,067
and where I found it in the file so
there in about four screens have code

906
00:55:43,067 --> 00:55:46,163
I open an audiophile I read through the
whole thing one sample at a time

907
00:55:47,063 --> 00:55:52,076
okay so moving on a bike to just sorta
foreshadow

908
00:55:52,076 --> 00:55:55,170
abuses of these classes iraq in the

909
00:55:56,007 --> 00:55:59,010
hi if you're Audioengine session

910
00:56:00,000 --> 00:56:04,068
which will follow this one so at the
bottom with CAD audiophile maybe idea

911
00:56:04,068 --> 00:56:05,075
PCR buffer

912
00:56:05,075 --> 00:56:08,144
and those are both used by something
called a the audio player narrowed

913
00:56:09,044 --> 00:56:13,087
which will be your basic mechanism for
scheduling audio to playback

914
00:56:13,087 --> 00:56:16,184
baby audio player notices is a subclass

915
00:56:17,084 --> 00:56:20,142
a more generic if the idea and no class
which is some

916
00:56:21,042 --> 00:56:24,044
unit a body a process I'm and

917
00:56:24,044 --> 00:56:28,065
we'll see how it the audio formats are
used one describing how to connect if

918
00:56:28,065 --> 00:56:29,072
the audience

919
00:56:29,072 --> 00:56:34,146
so that brings us to the and a bisexual
the stock

920
00:56:35,046 --> 00:56:39,123
we saw the AB audio format channel
layout PCM buffer and file classes

921
00:56:40,023 --> 00:56:43,025
you can use these without it the ideal
engine

922
00:56:43,025 --> 00:56:48,061
using your existing code with the car
audio audio tool box in our unit C API's

923
00:56:48,061 --> 00:56:52,160
if you're careful to stay real time say
and you can use those accessor methods

924
00:56:53,006 --> 00:56:56,078
to I extract the low-level sees
structures

925
00:56:57,032 --> 00:57:01,059
and again we'll be seeing how these are
used in more detail in the next session

926
00:57:01,059 --> 00:57:02,127
on eighty Audioengine

927
00:57:03,027 --> 00:57:06,035
and thats Genivar are here

928
00:57:07,007 --> 00:57:10,088
we've looked at many over Bluetooth
intra-party are you ideas

929
00:57:10,088 --> 00:57:13,094
lots of features a baby foundation idea

930
00:57:13,094 --> 00:57:17,179
and we hope you'll stick around for the
next session on AB Audioengine

931
00:57:18,079 --> 00:57:23,111
if you need more information call it
preserved Angeles

932
00:57:24,011 --> 00:57:29,067
from there the developer forms hers the
next session I keep talking about

